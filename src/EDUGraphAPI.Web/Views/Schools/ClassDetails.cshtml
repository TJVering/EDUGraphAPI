@model SectionDetailsViewModel
@{
    ViewBag.Title = "CLASS DETAILS";
    var teachersList = Model.Section.Teachers.ToList();
}
<div class="row schools">
    <div class="tophero">
        <div class="container">
            <div class="col-md-6 secondnav">
                <a href="/schools"> All Schools</a>
                > @Html.ActionLink(Model.School.Name, "Classes", null, new { schoolId = Model.School.ObjectId }, null)
                > @Model.Section.CourseName
            </div>
        </div>
        <div class="container">
            <div class="a-heading ">
                Class DETAILS
            </div>
            <div class="b-title">
                @Model.Section.CourseNumber | @Model.Section.DisplayName
            </div>
        </div>
        <div class="container coursedetail">

            <div class="col-md-6">
                <b>Course Name:</b> @Model.Section.CourseName
                <br />
                <b>Description:</b> @Model.Section.CourseDescription
                <br />
                <b>Period:</b> @Model.Section.Period
                <br />
                <b>Term Name:</b> @Model.Section.TermName
                <br />
                <b>Start/Finish Date:</b>@Convert.ToDateTime(Model.Section.TermStartDate).ToString("MMMM y") - @Convert.ToDateTime(Model.Section.TermEndDate).ToString("MMMM y")
            </div>
            <div class="col-md-6">
                @for (var i = 0; i < teachersList.Count(); i++)
                {
                    <b>Teacher:</b> @teachersList[i].DisplayName
                    if (i < teachersList.Count() - 1)
                    {
                        <br/>
                    }
                }
            </div>
        </div>
        <div style="clear:both;" />
    </div>
    <div class="students">

        <div class="col-md-6 ignore">
            <dvi class="coursename b-title">
                Student Conversation(s)
            </dvi>
            <table class="table  table-green ">
                <tr class="table-green-header">
                    <th class="tdleft">
                        student name
                    </th>
                    <th>
                        grade
                    </th>
                    <th>
                        conversations(s)
                    </th>

                </tr>
                @foreach (var stu in Model.Section.Students)
                {
                    <tr class="tr-content">
                        <td>@stu.DisplayName</td>
                        <td>@stu.EducationGrade</td>
                        <td>a link here.</td>

                    </tr>
                }


            </table>


        </div>

        <div class="col-md-6 ignore">
            <dvi class="coursename b-title">
                Reading Links
            </dvi>
            <table class="table  table-green">
                <tr class="table-green-header">
                    <th class="tdleft">
                        reading list
                    </th>
                    <th>
                       due date
                    </th>
                    <th>
                        download links
                    </th>

                </tr>
                @foreach (var stu in Model.Section.Students)
                {
                    <tr class="tr-content">
                        <td><a>@stu.DisplayName</a></td>
                        <td>@stu.EducationGrade</td>
                        <td>a link here.</td>

                    </tr>
                }


            </table>


        </div>

        <ul class="nav nav-tabs">
            <li ><a data-toggle="tab" href="#students">Students</a></li>
            <li><a data-toggle="tab" href="#documents">Class Documents</a></li>
            <li><a data-toggle="tab" href="#conversations">Conversations</a></li>
            <li class="active greentab"><a data-toggle="tab" href="#seatingchart"><span>SEATING CHART</span></a></li>
        </ul>
        <div class="tab-content">
            <div id="students" class="tab-pane fade ">
                <table class="table  table-green table-studnet">
                    <tr class="table-green-header">
                        <th class="tdleft">
                            student name
                        </th>
                        <th>
                            grade
                        </th>
                    </tr>
                    @foreach (var stu in Model.Section.Students)
                    {
                        <tr class="tr-content">
                            <td>@stu.DisplayName </td>
                            <td>@stu.EducationGrade</td>
                        </tr>
                    }
                </table>
            </div>
            <div id="documents" class="tab-pane fade">
                <table class="table  table-green table-studnet">
                    <tr class="table-green-header">
                        <th class="tdleft">
                            document name
                        </th>
                    </tr>
                    @foreach (var doc in Model.DriveItems)
                    {
                        <tr class="tr-content">
                            <td><a target="_blank"  href="@doc.WebUrl">@doc.Name</a></td>
                        </tr>
                    }
                </table>
                <span class="see-more"><a href="@Model.SeeMoreFilesUrl">See More</a></span>
            </div>
            <div id="conversations" class="tab-pane fade">
                <table class="table  table-green table-studnet">
                    <tr class="table-green-header">
                        <th class="tdleft">
                           topic
                        </th>
                    </tr>
                @foreach (var con in Model.Conversations)
                {
                    <tr class="tr-content">
                        <td><a target="_blank" href="@string.Format("{0}/mail&exsvurl=1&ispopout=0&ConvID={1}",Model.SeeMoreConversationsUrl,Uri.EscapeDataString(con.Id).Replace("_","%2B")) ">@con.Topic</a></td>
                    </tr>
                }
                </table>
                <span class="see-more"><a target="_blank"  href="@Model.SeeMoreConversationsUrl">See More</a></span>
            </div>

            <div id="seatingchart"  class="tab-pane fade in active">

                <div class="left" id="dvleft">
                   
                        @if (!Model.IsStudent)
                        {
                            <div> To assign seats for each student, drag and drop student profile icons below onto the seating map to the right.</div>
                        }
                        else
                        {
                            <div class="assignseat"><div class="greenicon"></div>Your assigned seat </div>
                        }
                   
                    <ul id="lstproducts">
                        @foreach (var stu in Model.Section.Students)
                        {
                            <li draggable='true' position="@stu.Position"><img src="@Url.Action("UserPhoto", "Photo", new { id = stu.O365UserId })" /> @stu.DisplayName</li>
                        }
                    </ul>
                </div>
                <div class="right" id="dvright">
             
                        <div class="teacherdesk">
                            Teacher's desk
                        </div>
                  
                    <div>
                        <div id="graybg">
                            @for (var i = 1; i <= 36; i++)
                            {
                                var stuWithSeat = Model.Section.Students.Where(c => c.Position == i).FirstOrDefault();
                                var img = "";
                                var studentName = "";
                                var containerClass = "";
                                if (stuWithSeat != null)
                                {
                                    img =string.Format("<img src = '/Photo/UserPhoto/{0}' />", stuWithSeat.O365UserId);
                                    studentName = stuWithSeat.DisplayName;
                                    containerClass = "white";
                                    if (Model.O365UserId == stuWithSeat.O365UserId)
                                    {
                                        containerClass = "green";
                                    }
                                }
                                <div class="stucontainer @containerClass">
                                    <div class="deskcontainer" >
                                        @if (!Model.IsStudent)
                                        {
                                            <div class="deskclose"><img src="~/Images/close.png" /></div>
                                        }
                                        <div class="deskicon">
                                            @Html.Raw(img)
                                        </div>
                                        <div class="stuname">@studentName</div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
                <div id="dvedit" class="dvedit">
                   @if (!Model.IsStudent)
                   {
                       <div> edit cancel</div>
                   }
                   
                </div >
                <br style = "clear:both" />
             </div >
         </div >


     </div >





 </ div >

@*if a teacher login*@
@Scripts.Render("~/bundles/classdetail")
